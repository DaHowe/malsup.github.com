/* Plugin for Cycle2; Copyright (c) 2012 M. Alsup; v20140114 */
(function(e){"use strict";function t(t,i,n){var o,s=t.API.getComponent("pager");s.each(function(){var s=e(this);if(i.pagerTemplate){var r=t.API.tmpl(i.pagerTemplate,i,t,n[0]);o=e(r).appendTo(s)}else o=s.children().eq(t.slideCount-1);o.on(t.pagerEvent,function(e){e.preventDefault(),t.API.page(s,e.currentTarget)})})}function i(e,t){var i=this.opts();if(!i.busy||i.manualTrump){var n=e.children().index(t),o=n,s=o>i.currSlide;i.currSlide!=o&&(i.nextSlide=o,i.API.prepareTx(!0,s),i.API.trigger("cycle-pager-activated",[i,e,t]))}}e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerTemplate:"<span>&bull;</span>"}),e(document).on("cycle-bootstrap",function(e,i,n){n.buildPagerLink=t}),e(document).on("cycle-slide-added",function(e,t,n,o){t.pager&&(t.API.buildPagerLink(t,n,o),t.API.page=i)}),e(document).on("cycle-slide-removed",function(t,i,n){if(i.pager){var o=i.API.getComponent("pager");o.each(function(){var t=e(this);e(t.children()[n]).remove()})}}),e(document).on("cycle-update-view",function(t,i){var n;i.pager&&(n=i.API.getComponent("pager"),n.each(function(){e(this).children().removeClass(i.pagerActiveClass).eq(i.currSlide).addClass(i.pagerActiveClass)}))}),e(document).on("cycle-destroyed",function(e,t){var i=t.API.getComponent("pager");i&&(i.children().off(t.pagerEvent),t.pagerTemplate&&i.empty())})})(jQuery);